<ResourceDictionary
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:Local="using:More.Windows.Controls">

 <ResourceDictionary.ThemeDictionaries>
  
  <ResourceDictionary x:Key="Default">

   <SolidColorBrush x:Key="ModalForegroundThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalBackgroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonForegroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonBackgroundThemeBrush">#FF353535</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonBorderThemeBrush">#FF353535</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPointerOverBackgroundThemeBrush">#FF727272</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPointerOverForegroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPressedBackgroundThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPressedBorderThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPressedForegroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonDisabledBackgroundThemeBrush">#66CACACA</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonDisabledBorderThemeBrush">#1A000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonDisabledForegroundThemeBrush">#66000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalFocusVisualWhiteStrokeThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalFocusVisualBlackStrokeThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalTextBoxBorderThemeBrush">#A3000000</SolidColorBrush>

  </ResourceDictionary>
  
  <ResourceDictionary x:Key="Light">

   <SolidColorBrush x:Key="ModalForegroundThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalBackgroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonForegroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonBackgroundThemeBrush">#FF353535</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonBorderThemeBrush">#FF353535</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPointerOverBackgroundThemeBrush">#FF727272</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPointerOverForegroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPressedBackgroundThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPressedBorderThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPressedForegroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonDisabledBackgroundThemeBrush">#66CACACA</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonDisabledBorderThemeBrush">#1A000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonDisabledForegroundThemeBrush">#66000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalFocusVisualWhiteStrokeThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalFocusVisualBlackStrokeThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalTextBoxBorderThemeBrush">#A3000000</SolidColorBrush>
   
  </ResourceDictionary>
  
  <ResourceDictionary x:Key="Dark">

   <SolidColorBrush x:Key="ModalForegroundThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalBackgroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonForegroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonBackgroundThemeBrush">#FF353535</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonBorderThemeBrush">#FF353535</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPointerOverBackgroundThemeBrush">#FF727272</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPointerOverForegroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPressedBackgroundThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPressedBorderThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonPressedForegroundThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonDisabledBackgroundThemeBrush">#66CACACA</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonDisabledBorderThemeBrush">#1A000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalButtonDisabledForegroundThemeBrush">#66000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalFocusVisualWhiteStrokeThemeBrush">#FFFFFFFF</SolidColorBrush>
   <SolidColorBrush x:Key="ModalFocusVisualBlackStrokeThemeBrush">#FF000000</SolidColorBrush>
   <SolidColorBrush x:Key="ModalTextBoxBorderThemeBrush">#A3000000</SolidColorBrush>

  </ResourceDictionary>
  
 </ResourceDictionary.ThemeDictionaries>

 <Style x:Key="ModalDialogButton" TargetType="Button">
  <Setter Property="Foreground" Value="{ThemeResource ModalButtonForegroundThemeBrush}" />
  <Setter Property="Background" Value="{ThemeResource ModalButtonBackgroundThemeBrush}" />
  <Setter Property="BorderBrush" Value="{ThemeResource ModalButtonBorderThemeBrush}" />
  <Setter Property="BorderThickness" Value="{ThemeResource ButtonBorderThemeThickness}" />
  <Setter Property="MinWidth" Value="95" />
  <Setter Property="Padding" Value="12,4,12,4" />
  <Setter Property="HorizontalAlignment" Value="Left" />
  <Setter Property="VerticalAlignment" Value="Center" />
  <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
  <Setter Property="FontWeight" Value="SemiBold" />
  <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}" />
  <Setter Property="Template">
   <Setter.Value>
    <ControlTemplate TargetType="Button">
     <Grid>
      <VisualStateManager.VisualStateGroups>
       <VisualStateGroup x:Name="CommonStates">
        <VisualState x:Name="Normal" />
        <VisualState x:Name="PointerOver">
         <Storyboard>
          <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="Background">
           <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ModalButtonPointerOverBackgroundThemeBrush}" />
          </ObjectAnimationUsingKeyFrames>
          <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
           <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ModalButtonPointerOverForegroundThemeBrush}" />
          </ObjectAnimationUsingKeyFrames>
         </Storyboard>
        </VisualState>
        <VisualState x:Name="Pressed">
         <Storyboard>
          <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="Background">
           <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ModalButtonPressedBackgroundThemeBrush}" />
          </ObjectAnimationUsingKeyFrames>
          <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="BorderBrush">
           <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ModalButtonPressedBorderThemeBrush}" />
          </ObjectAnimationUsingKeyFrames>
          <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
           <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ModalButtonPressedForegroundThemeBrush}" />
          </ObjectAnimationUsingKeyFrames>
         </Storyboard>
        </VisualState>
        <VisualState x:Name="Disabled">
         <Storyboard>
          <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="Background">
           <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ModalButtonDisabledBackgroundThemeBrush}" />
          </ObjectAnimationUsingKeyFrames>
          <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="BorderBrush">
           <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ModalButtonDisabledBorderThemeBrush}" />
          </ObjectAnimationUsingKeyFrames>
          <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
           <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ModalButtonDisabledForegroundThemeBrush}" />
          </ObjectAnimationUsingKeyFrames>
         </Storyboard>
        </VisualState>
       </VisualStateGroup>
       <VisualStateGroup x:Name="FocusStates">
        <VisualState x:Name="Focused">
         <Storyboard>
          <DoubleAnimation Storyboard.TargetName="FocusVisualWhite" Storyboard.TargetProperty="Opacity" To="1" Duration="0" />
          <DoubleAnimation Storyboard.TargetName="FocusVisualBlack" Storyboard.TargetProperty="Opacity" To="1" Duration="0" />
         </Storyboard>
        </VisualState>
        <VisualState x:Name="Unfocused" />
        <VisualState x:Name="PointerFocused" />
       </VisualStateGroup>
      </VisualStateManager.VisualStateGroups>
      <Border x:Name="Border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Margin="3">
       <ContentPresenter x:Name="ContentPresenter"
                           Content="{TemplateBinding Content}"
                           ContentTransitions="{TemplateBinding ContentTransitions}"
                           ContentTemplate="{TemplateBinding ContentTemplate}"
                           Margin="{TemplateBinding Padding}"
                           HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                           VerticalAlignment="{TemplateBinding VerticalContentAlignment}" 
                           AutomationProperties.AccessibilityView="Raw"/>
      </Border>
      <Rectangle x:Name="FocusVisualWhite"
                   IsHitTestVisible="False"
                   Stroke="{ThemeResource ModalFocusVisualWhiteStrokeThemeBrush}"
                   StrokeEndLineCap="Square"
                   StrokeDashArray="1,1"
                   Opacity="0"
                   StrokeDashOffset="1.5" />
      <Rectangle x:Name="FocusVisualBlack"
                   IsHitTestVisible="False"
                   Stroke="{ThemeResource ModalFocusVisualBlackStrokeThemeBrush}"
                   StrokeEndLineCap="Square"
                   StrokeDashArray="1,1"
                   Opacity="0"
                   StrokeDashOffset="0.5" />
     </Grid>
    </ControlTemplate>
   </Setter.Value>
  </Setter>
 </Style>

 <Style TargetType="Local:TextInputDialog">
  <Setter Property="Padding" Value="10" />
  <Setter Property="IsTabStop" Value="false" />
  <Setter Property="HorizontalAlignment" Value="Center" />
  <Setter Property="VerticalAlignment" Value="Center" />
  <Setter Property="HorizontalContentAlignment" Value="Stretch" />
  <Setter Property="VerticalContentAlignment" Value="Stretch" />
  <Setter Property="Foreground" Value="{ThemeResource ModalForegroundThemeBrush}" />
  <Setter Property="Background" Value="{ThemeResource ModalBackgroundThemeBrush}" />
  <Setter Property="BorderThickness" Value="0" />
  <Setter Property="BorderBrush" Value="Transparent" />
  <Setter Property="Template">
   <Setter.Value>
    <ControlTemplate TargetType="Local:TextInputDialog">
     <Border Background="{TemplateBinding Background}"
             Padding="{TemplateBinding Padding}"
             HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
             VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
      <Grid>
       <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
       </Grid.RowDefinitions>
       <TextBlock Text="{TemplateBinding Title}" FontSize="30" TextWrapping="Wrap" />
       <ContentPresenter Grid.Row="1"
                         Margin="0,10,0,10"
                         Content="{TemplateBinding Content}"
                         ContentTemplate="{TemplateBinding ContentTemplate}"
                         Foreground="{TemplateBinding Foreground}"
                         FontFamily="{TemplateBinding FontFamily}">
        <ContentPresenter.Resources>
         <Style TargetType="TextBlock">
          <Setter Property="TextWrapping" Value="Wrap" />
          <Setter Property="TextTrimming" Value="CharacterEllipsis" />
         </Style>
        </ContentPresenter.Resources>
       </ContentPresenter>
       <TextBox x:Name="InputTextBox" BorderBrush="{ThemeResource ModalTextBoxBorderThemeBrush}" Grid.Row="2" />
       <ItemsControl ItemsSource="{Binding Commands, RelativeSource={RelativeSource TemplatedParent}}" Margin="0,12,0,0" Grid.Row="3">
        <ItemsControl.ItemsPanel>
         <ItemsPanelTemplate>
          <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" />
         </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
         <DataTemplate>
          <Button Margin="10,0,0,0" Style="{StaticResource ModalDialogButton}" Content="{Binding Name}" Command="{Binding}" />
         </DataTemplate>
        </ItemsControl.ItemTemplate>
       </ItemsControl>
      </Grid>
     </Border>
    </ControlTemplate>
   </Setter.Value>
  </Setter>
 </Style>

 <Style TargetType="Local:GridItemsControl">
  <!-- REMARKS: The ItemsPanel for this implementation should NEVER use a panel other than Grid -->
  <Setter Property="ItemsPanel">
   <Setter.Value>
    <ItemsPanelTemplate>
     <Grid />
    </ItemsPanelTemplate>
   </Setter.Value>
  </Setter>
 </Style>

 <Style TargetType="Local:TrendIndicator">
  <Setter Property="IsTabStop" Value="False" />
  <Setter Property="Width" Value="25" />
  <Setter Property="Height" Value="25" />
  <Setter Property="Padding" Value="1" />
  <Setter Property="Foreground" Value="White" />
  <Setter Property="HorizontalContentAlignment" Value="Center" />
  <Setter Property="VerticalContentAlignment" Value="Center" />
  <Setter Property="Template">
   <Setter.Value>
    <ControlTemplate TargetType="Local:TrendIndicator">
     <Grid>

      <VisualStateManager.VisualStateGroups>
       <VisualStateGroup x:Name="TrendStates">
        <VisualState x:Name="Undefined">
         <Storyboard>
          <DoubleAnimation Duration="0:0:0.02" From="1" To="0" Storyboard.TargetName="Arrow" Storyboard.TargetProperty="Opacity" />
          <DoubleAnimation Duration="0:0:0.02" From="1" To="0" Storyboard.TargetName="Dash" Storyboard.TargetProperty="Opacity" />
         </Storyboard>
        </VisualState>
        <VisualState x:Name="Flat">
         <Storyboard>
          <DoubleAnimation Duration="0:0:0.02" From="1" To="0" Storyboard.TargetName="Arrow" Storyboard.TargetProperty="Opacity" />
          <DoubleAnimation Duration="0:0:0.02" From="0" To="1" Storyboard.TargetName="Dash" Storyboard.TargetProperty="Opacity" />
         </Storyboard>
        </VisualState>
        <VisualState x:Name="Positive">
         <Storyboard>
          <DoubleAnimation Duration="0:0:0.02" From="1" To="0" Storyboard.TargetName="Dash" Storyboard.TargetProperty="Opacity" />
          <DoubleAnimation Duration="0:0:0.02" From="0" To="1" Storyboard.TargetName="Arrow" Storyboard.TargetProperty="Opacity" />
          <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Arrow" Storyboard.TargetProperty="Data">
           <DiscreteObjectKeyFrame KeyTime="0" Value="F1 M 278.398,10.3933L 273.525,16.7307L 276.608,16.7307L 276.608,22.5267L 280.193,22.5267L 280.193,16.7307L 283.276,16.7307L 278.398,10.3933 Z" />
          </ObjectAnimationUsingKeyFrames>
         </Storyboard>
        </VisualState>
        <VisualState x:Name="Negative">
         <Storyboard>
          <DoubleAnimation Duration="0:0:0.02" From="1" To="0" Storyboard.TargetName="Dash" Storyboard.TargetProperty="Opacity" />
          <DoubleAnimation Duration="0:0:0.02" From="0" To="1" Storyboard.TargetName="Arrow" Storyboard.TargetProperty="Opacity" />
          <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Arrow" Storyboard.TargetProperty="Data">
           <DiscreteObjectKeyFrame KeyTime="0" Value="F1 M 642.725,23.2878L 647.599,16.9505L 644.517,16.9505L 644.517,11.1558L 640.932,11.1558L 640.932,16.9505L 637.851,16.9505L 642.725,23.2878 Z" />
          </ObjectAnimationUsingKeyFrames>
         </Storyboard>
        </VisualState>
       </VisualStateGroup>
      </VisualStateManager.VisualStateGroups>

      <Path x:Name="Circle"
            Margin="{TemplateBinding Padding}"
            Stretch="Fill"
            Fill="{Binding ScoreBrush, RelativeSource={RelativeSource TemplatedParent}}"
            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"    
            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
            Data="F1 M 267.763,17.84C 267.763,23.9973 272.755,28.9866 278.909,28.9866L 278.909,28.9866C 285.065,28.9866 290.056,23.9973 290.056,17.84L 290.056,17.84C 290.056,11.684 285.065,6.6933 278.909,6.6933L 278.909,6.6933C 272.755,6.6933 267.763,11.684 267.763,17.84 Z ">
      </Path>

      <!-- trend up or down -->
      <Path x:Name="Arrow"
            Opacity="0"
            Stretch="Fill"
            Fill="{TemplateBinding Foreground}"
            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"    
            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
            RenderTransformOrigin="0.5,0.5"
            Data="F1 M 278.398,10.3933L 273.525,16.7307L 276.608,16.7307L 276.608,22.5267L 280.193,22.5267L 280.193,16.7307L 283.276,16.7307L 278.398,10.3933 Z">
       <Path.RenderTransform>
        <ScaleTransform ScaleX="0.6" ScaleY="0.6" />
       </Path.RenderTransform>
      </Path>

      <!-- even trend -->
      <Rectangle x:Name="Dash"
                 RadiusX="2"
                 RadiusY="2"
                 Opacity="0"
                 RenderTransformOrigin="0.5,0.5"
                 Fill="{TemplateBinding Foreground}">
       <Rectangle.RenderTransform>
        <ScaleTransform ScaleX="0.6" ScaleY="0.2" />
       </Rectangle.RenderTransform>
      </Rectangle>

     </Grid>
    </ControlTemplate>
   </Setter.Value>
  </Setter>
 </Style>

 <Style TargetType="Local:LayoutTransformer">
  <Setter Property="Template">
   <Setter.Value>
    <ControlTemplate TargetType="Local:LayoutTransformer">
     <Grid x:Name="TransformRoot" Background="{TemplateBinding Background}">
      <ContentPresenter x:Name="Presenter" Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}"/>
     </Grid>
    </ControlTemplate>
   </Setter.Value>
  </Setter>
 </Style>
 
</ResourceDictionary>